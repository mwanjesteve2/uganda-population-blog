<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Mwanje Ronald Steve">

<title>What The Numbers Mean for Jobs, the Future, and Why Todayâ€™s 30-Year-Olds Hold the Biggest Advantage</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="index_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="index_files/libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="index_files/libs/quarto-html/anchor.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="index_files/libs/bootstrap/bootstrap-4d7f0bce1131f3e5f9547cd857cfbfc8.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body class="quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#uganda-today-a-nation-in-motion-and-getting-younger" id="toc-uganda-today-a-nation-in-motion-and-getting-younger" class="nav-link" data-scroll-target="#uganda-today-a-nation-in-motion-and-getting-younger">1. Uganda Today: A Nation in Motion and Getting Younger</a></li>
  <li><a href="#youth-vs-older-adults-35-the-population-gap" id="toc-youth-vs-older-adults-35-the-population-gap" class="nav-link" data-scroll-target="#youth-vs-older-adults-35-the-population-gap">2. Youth vs Older Adults (35+): The Population Gap</a></li>
  <li><a href="#a-highly-competitive-job-market" id="toc-a-highly-competitive-job-market" class="nav-link" data-scroll-target="#a-highly-competitive-job-market">3. A Highly Competitive Job Market</a></li>
  <li><a href="#uganda-in-2045-population-outlook" id="toc-uganda-in-2045-population-outlook" class="nav-link" data-scroll-target="#uganda-in-2045-population-outlook">4. Uganda in 2045: Population Outlook</a></li>
  <li><a href="#why-ugandans-in-their-30s-hold-the-advantage" id="toc-why-ugandans-in-their-30s-hold-the-advantage" class="nav-link" data-scroll-target="#why-ugandans-in-their-30s-hold-the-advantage">5.ğŸŒŸWhy Ugandans in Their 30s Hold the Advantage</a></li>
  <li><a href="#conclusion-ugandas-population-is-the-opportunity-of-our-time" id="toc-conclusion-ugandas-population-is-the-opportunity-of-our-time" class="nav-link" data-scroll-target="#conclusion-ugandas-population-is-the-opportunity-of-our-time">ğŸ”‘Conclusion: Ugandaâ€™s Population Is the Opportunity of Our Time</a></li>
  <li><a href="#appendix" id="toc-appendix" class="nav-link" data-scroll-target="#appendix">APPENDIX</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">What The Numbers Mean for Jobs, the Future, and Why Todayâ€™s 30-Year-Olds Hold the Biggest Advantage</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Mwanje Ronald Steve </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<p><em>Originally published at:</em><br>
https://steveronaldmwanje.blogspot.com/2025/12/a-python-ugandas-population-analysis.html</p>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>When I fed Ugandaâ€™s 2024 National Population and Housing Census into Python, the numbers didnâ€™t just confirm what we suspected, they screamed it.</p>
<p>Uganda is one of the youngest and fastest-growing nations on Earth. In May 2024, the population stood at <strong>45.9 million</strong>, and by December 2025 it had surged to <strong>51.4 million</strong>, growing at <strong>2.9% annually</strong>.</p>
<p>These numbers are not just statistics, they tell a story about jobs, pressure, opportunity, and timing.</p>
<hr>
</section>
<section id="uganda-today-a-nation-in-motion-and-getting-younger" class="level2">
<h2 class="anchored" data-anchor-id="uganda-today-a-nation-in-motion-and-getting-younger">1. Uganda Today: A Nation in Motion and Getting Younger</h2>
<p>Uganda is growing fast, yes! but itâ€™s still largely rural. <strong>66%</strong> of Ugandans live outside towns, rooted in farming and community life. Every morning, though Kampala swells to more than <strong>2.5 million people</strong>, a reminder of how hard we hustle for work and opportunityğŸ™ï¸. But the real story is in the age breakdown, our national heartbeat:</p>
<div id="cc6c9160" class="cell" data-execution_count="1">
<div class="cell-output cell-output-stdout">
<pre><code>        Segment  Percent (%)  Absolute (approx)
Under 18 (0-17)         49.9           25648600
     Ages 18-19          5.6            2878400
     Ages 20-29         18.5            9509000
     Ages 30-59         21.0           10794000
       Aged 60+          5.0            2570000</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-2-output-2.png" width="934" height="758" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<ul>
<li><strong>49.9%</strong> below 18<br>
</li>
<li><strong>55%+</strong> below 20<br>
</li>
<li><strong>73â€“75%</strong> below 30<br>
</li>
<li><strong>Only 5%</strong> aged 60+</li>
</ul>
<p>This is a massive youth wave in Ugandaâ€™s; Is this a greatest blessing or biggest test! Put simply: if you walk into any gathering, church, market, classroom, taxi park, three out of every four faces you see belong to someone under 30**.</p>
<p>On the bright side, we have an energetic, ambitious workforce capable of transforming the nation. But if innovation and entrepreneurship donâ€™t rise fast enough, Uganda will feel the weight of growing unemployment, rising frustration, and underutilized potential. A youthful population without opportunity is like pressure steaming inside a sealed pot, eventually something gives.</p>
<p>Ugandaâ€™s next chapter will be shaped by builders, risk-takers, creators, and problem-solvers who convert this youthful momentum into true productive powerğŸ› ï¸.</p>
<hr>
</section>
<section id="youth-vs-older-adults-35-the-population-gap" class="level2">
<h2 class="anchored" data-anchor-id="youth-vs-older-adults-35-the-population-gap">2. Youth vs Older Adults (35+): The Population Gap</h2>
<p>Ugandaâ€™s demographic pyramid isnâ€™t a pyramid at all, itâ€™s a tower of youth. Our median age sits at just <strong>16â€“17 years</strong>, one of the lowest worldwide.</p>
<div id="386a6989" class="cell" data-execution_count="2">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-3-output-1.png" width="1126" height="855" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>â€¢ <strong>0â€“14 years: ~43%</strong> â€¢ <strong>15â€“19 years: ~11%</strong> â€¢ <strong>20â€“34 years: 25â€“26%</strong> â€¢ <strong>Under 18s: 49.9%</strong> â€¢ <strong>Adults 35+: only 20â€“22% (10â€“11 million people)</strong> o <strong>Working-age adults 35â€“64: ~17%</strong> o <strong>Seniors 65+: 3â€“4%</strong> â€¢ <strong>Dependency ratio</strong>: <strong>83.8 dependents for every 100 earners</strong></p>
<p>This sharp gulf between a massive youth population and a small adult base paints a clear picture: the responsibility resting on the shoulders of those above 30 is enormous. This is exactly why Ugandans above 30 hold <strong>the strategic steering wheel of the economy</strong>. They have experience, networks, decision-making power, and the responsibility to shape opportunities for the millions coming behind them. And Uganda simply cannot afford a mindset that waits for donors, searches for rare jobs, or clings to traditional employment.</p>
<p>With millions entering the labour market every few years, creation, not only competition must define the future. The real question is simple: â€œWhat can todayâ€™s adults build that will unlock the potential of Ugandaâ€™s huge youth base?â€ Because at the end of the day, <strong>Ugandaâ€™s GDP</strong> will not be determined by the energy of its youth, but by how effectively the older adults channel that energy into opportunity, productivity, and national growth.</p>
<hr>
</section>
<section id="a-highly-competitive-job-market" class="level2">
<h2 class="anchored" data-anchor-id="a-highly-competitive-job-market">3. A Highly Competitive Job Market</h2>
<p><strong>Ugandaâ€™s job market</strong> has become a race where thousands join the track every year, but the finish line barely moves. Our population structure, nearly 80% under 35, half under 18, and only 20â€“22% in older working-age groups, creates a constant overflow of job seekers.</p>
<div id="bd2c50b5" class="cell" data-execution_count="3">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-4-output-1.png" width="1334" height="946" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Each year: - <strong>600,000+</strong> youth leave school - <strong>130,000</strong> university graduates enter the market - Only <strong>90,000â€“120,000</strong> jobs are created - <strong>Youth unemployment exceeds 42%</strong> (NEET - Not in Employment, Education, or Training)</p>
<p>Economically, the warning is clearğŸš¨: â€¢ Every 1% rise in youth unemployment drags national GDP down by <strong>0.45%</strong> This pressure means one thing: â€¢ Opportunity in Uganda will not be found, it must be created. â€¢ Innovation and entrepreneurship are becoming survival tools, not buzzwords.</p>
<hr>
</section>
<section id="uganda-in-2045-population-outlook" class="level2">
<h2 class="anchored" data-anchor-id="uganda-in-2045-population-outlook">4. Uganda in 2045: Population Outlook</h2>
<p>If the current 2.9% annual growth rate holds, the country will reach about <strong>70 million</strong> people by 2044 and push toward <strong>80 - 85 million</strong> by 2050. Even with fertility slowly falling to 2 - 3 children per woman, Uganda is still on track to double its population by the mid-2040s</p>
<div id="2287b950" class="cell" data-execution_count="4">
<div class="cell-output cell-output-stdout">
<pre><code>Compound growth formula used: P(t) = P0 * (1 + r)^t
P0 = 51.4 million (in 2025), r = 2.90% per year

Population projection:
 - In 2044: 88.48 million
 - In 2050: 105.04 million

 - Target 70M reached around: 2035.804 (approx 2035 + 10 months)
 - Target 80M reached around: 2040.475 (approx 2040 + 6 months)
 - Target 85M reached around: 2042.596 (approx 2042 + 7 months)</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-5-output-2.png" width="1044" height="566" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Hereâ€™s how the population shifts: â€¢ Todayâ€™s 18 million youth <strong>(15â€“34 years)</strong> will become the <strong>35â€“54-year</strong> workforce in 2045. â€¢ Todayâ€™s children under 15 will become the next wave of young adults. â€¢ Seniors grow slightly to <strong>5â€“7%</strong>, but Uganda will avoid the aging crisis seen in Europe or Japan. This isnâ€™t a burden, itâ€™s a massive opportunity. If Uganda invests now in education, skills, innovation, and productivity, this youthful workforce can unlock a 1â€“2% annual GDP boost, a true demographic dividendğŸ’°. Countries like South Korea and Singapore used population momentum to reinvent their economies. Uganda stands at the same crossroads, ready to power digital services, agriculture, supply chains, energy, transport, education, fintech, and technology-driven growth. The question is no longer whether Uganda can rise. The real question is: â€œWill we seize the advantage of our youthful population?â€</p>
<hr>
</section>
<section id="why-ugandans-in-their-30s-hold-the-advantage" class="level2">
<h2 class="anchored" data-anchor-id="why-ugandans-in-their-30s-hold-the-advantage">5.ğŸŒŸWhy Ugandans in Their 30s Hold the Advantage</h2>
<p>Ugandans in their 30s, about 6â€“7 million people, are standing at the sweet spot of opportunity. Why? - Theyâ€™re entering their peak earning years (30â€“55). - They have 25+ productive years ahead to build wealth, mentor youth, and make bold moves. - They can own the businesses that a fast-growing population will depend on, food, housing, education, transport, digital services, energy, logistics, and healthcare. - As job competition skyrockets toward 2044, they are best positioned to be employers, not job seekers.</p>
<p>Where should todayâ€™s 30-year-olds invest? The data points to booming sectors: ### High-Growth Sectors - ğŸŒ¾ Agriculture &amp; Agribusiness:- Food demand will double by 2045. Think commercial farming, poultry, dairy, feeds, food processing, cold storage, and irrigation. - ğŸ˜ï¸Real Estate &amp; Housing:- Urban populations will doubleâ€”affordable rentals, hostels, land banking, and apartments will be hot. - ğŸ“Education &amp; Skills Training:- With 22.2 million children under 18, the demand for schools, vocational training, EdTech, and digital learning will explode. - ğŸ¥Healthcare &amp; Wellness:- Clinics, labs, pharmacies, maternity care, and elder-care services will be in high demand. - ğŸ’»Technology &amp; Digital Services:- The digital economy is growing at 15% annually, IT support, fintech, e-commerce, digital marketing, coding, AI, VR/AR tools will all thrive.Digital Services &amp; Technology - ğŸšš Transport &amp; Logistics:- Boda fleets, delivery services, courier companies, warehousing, and cold-chain logistics become essential with a large population. - â˜€ï¸Renewable Energy:- With electricity access at only 53%, solar systems, mini-grids, and battery solutions are future gold mines.</p>
<p>The next 20 years belong to the builders, not the spectators nor employees.</p>
<hr>
</section>
<section id="conclusion-ugandas-population-is-the-opportunity-of-our-time" class="level2">
<h2 class="anchored" data-anchor-id="conclusion-ugandas-population-is-the-opportunity-of-our-time">ğŸ”‘Conclusion: Ugandaâ€™s Population Is the Opportunity of Our Time</h2>
<p>Ugandaâ€™s population surge isnâ€™t a crisis, itâ€™s our greatest competitive edge. Yes, the job market will tighten, youth numbers will keep rising, and pressure on food, housing, and services will intensify. But hidden in that pressure is a unique advantage for Ugandans in their 30s today. â€¢ You have the experience. â€¢ You have the energy. â€¢ And you have a massive customer base growing right beneath your feet. If you invest now, whether in agriculture, housing, digital services, education, energy, or transport, youâ€™re not just starting a business.Youâ€™re claiming your share of the 70â€“85 millionâ€“person economy Uganda is becoming ğŸš€. The future rewards those who prepare early. Ugandaâ€™s population isnâ€™t just a statistic. Itâ€™s a market, a workforce, a demand curve, and a future business empire waiting for courageous builders.</p>
<p>Letâ€™s build Uganda.</p>
</section>
<section id="appendix" class="level2">
<h2 class="anchored" data-anchor-id="appendix">APPENDIX</h2>
<div id="34e1725c" class="cell" data-execution_count="5">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-6-output-1.png" width="772" height="566" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-6-output-2.png" width="758" height="230" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-6-output-3.png" width="662" height="433" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-6-output-4.png" width="950" height="566" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-6-output-5.png" width="614" height="189" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-6-output-6.png" width="810" height="528" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-6-output-7.png" width="810" height="528" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Age-structure summary table:
           Age group  Percent (%) Approx. count
     0-14 (Children)         42.5    21,845,000
 15-19 (Adolescents)         11.0     5,654,000
20-34 (Young adults)         25.5    13,107,000
      35-64 (Adults)         17.0     8,738,000
       65+ (Seniors)          4.0     2,056,000</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-6-output-9.png" width="1142" height="355" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "î§‹";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>